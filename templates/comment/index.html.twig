<div class="comments">
    <div class="comments__header pb-3">
        <div class="clearfix">
            <h4 class="float-left text-primary">Comments</h4>
            <h6 class="float-right text-muted">{{ comments|length }} comments</h6>
        </div>
        {% if is_granted('ROLE_USER') %}
            {{ form_start(commentForm) }}
            <div class="d-flex">
                <div class="w-100">
                    {{ form_widget(commentForm) }}
                </div>
                <div class="pl-2">
                    <button type="submit" class="btn btn-outline-success float-right d-block"><i class="fas fa-plus-circle"></i> Send</button>
                </div>
            </div>
            {{ form_end(commentForm) }}
        {% else %}
            <p class="bg-light rounded p-4 text-center text-info">
                Please <a href="{{ path('app_login') }}">sign in</a> or <a href="{{ path('app_register') }}">register</a> for commenting
            </p>
        {% endif %}
    </div>
    <div class="comments__list">
        {% for comment in comments %}
            <div class="d-flex">
                <div class="pr-3">
                    <img class="img-fluid rounded-circle" src="//i.pravatar.cc/5{{ random(5) }}">
                </div>
                <div class="w-100">
                    <div class="clearfix">
                        <h5 class="float-left media-heading user_name">{{ comment.owner.firstname }}</h5>
                        <p class="float-right text-info small">{{ comment.createdAt|ago }}</p>
                    </div>
                    <p class="text-success">{{ comment.text }}</p>
                    {% if is_granted('ROLE_USER') %}
                    <div class="clearfix">
                        <div class="float-left">
                            <div class="btn-group btn-group-sm js-like">
                                <a href="{{ path('comment_like', {id: comment.id}) }}" class="btn btn-sm btn-outline-success js-like-btn" data-type="1"><i class="fas fa-thumbs-up"></i> <span>{{ comment.likes }}</span></a>
                                <a href="{{ path('comment_dislike', {id: comment.id}) }}" class="btn btn-sm btn-outline-danger js-like-btn" data-type="-1"><i class="fas fa-thumbs-down"></i> <span>{{ comment.dislikes }}</span></a>
                            </div>
                        </div>
                        <div class="float-right">
                            <a href="#" class="btn btn-sm btn-outline-info px-4"><i class="fas fa-reply"></i></a>
                        </div>
                    </div>
                    {% endif %}
                    <hr>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

